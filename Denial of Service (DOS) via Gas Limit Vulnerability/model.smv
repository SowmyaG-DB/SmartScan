MODULE main
VAR
 state : {"Start", "FundReceived", "FundsWithdrawn", "TransactionFailed"};
ASSIGN
 init(state) := "Start";
 next(state) := case
 state = "Start" : "FundReceived";
 state = "FundReceived" : "FundsWithdrawn";
 state = "FundReceived" : "TransactionFailed";
 TRUE : state;
 esac;

-- DOS Prevention
SPEC AG (state != "TransactionFailed");
